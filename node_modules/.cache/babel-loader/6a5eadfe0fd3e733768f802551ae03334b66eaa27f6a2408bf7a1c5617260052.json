{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"management-section\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AddCustomerModal = _resolveComponent(\"AddCustomerModal\");\n  const _component_UpdateCustomerModal = _resolveComponent(\"UpdateCustomerModal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"Manage Customers\", -1 /* HOISTED */)), _createCommentVNode(\"    <button @click=\\\"openAddModal\\\">Add Customer</button>\"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchQuery = $event),\n    placeholder: \"Search customers...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchQuery]]), _createElementVNode(\"table\", null, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.sortBy('id'))\n  }, \"ID\"), _createElementVNode(\"th\", {\n    onClick: _cache[2] || (_cache[2] = $event => _ctx.sortBy('firstName'))\n  }, \"First Name\"), _createElementVNode(\"th\", {\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.sortBy('lastName'))\n  }, \"Last Name\"), _createElementVNode(\"th\", {\n    onClick: _cache[4] || (_cache[4] = $event => _ctx.sortBy('email'))\n  }, \"Email\"), _createElementVNode(\"th\", {\n    onClick: _cache[5] || (_cache[5] = $event => _ctx.sortBy('phone'))\n  }, \"Phone\"), _cache[6] || (_cache[6] = _createElementVNode(\"th\", null, \"Actions\", -1 /* HOISTED */))])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredCustomers, customer => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: customer.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(customer.userId), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(customer.firstName), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(customer.lastName), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(customer.contact.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(customer.contact.phoneNumber), 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => $options.openUpdateModal(customer)\n    }, \"Update\", 8 /* PROPS */, _hoisted_2), _createElementVNode(\"button\", {\n      onClick: $event => $options.removeCustomer(customer.userId)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_3)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Modals \"), _createVNode(_component_AddCustomerModal, {\n    isVisible: $data.isAddModalVisible,\n    onClose: $options.closeAddModal,\n    onAdd: $options.addCustomer\n  }, null, 8 /* PROPS */, [\"isVisible\", \"onClose\", \"onAdd\"]), _createVNode(_component_UpdateCustomerModal, {\n    isVisible: $data.isUpdateModalVisible,\n    customer: $data.selectedCustomer,\n    onClose: $options.closeUpdateModal,\n    onUpdateCustomer: $options.updateCustomer\n  }, null, 8 /* PROPS */, [\"isVisible\", \"customer\", \"onClose\", \"onUpdateCustomer\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","type","_cache","$event","$data","searchQuery","placeholder","onClick","_ctx","sortBy","_Fragment","_renderList","$options","filteredCustomers","customer","key","id","_toDisplayString","userId","firstName","lastName","contact","email","phoneNumber","openUpdateModal","_hoisted_2","removeCustomer","_hoisted_3","_createVNode","_component_AddCustomerModal","isVisible","isAddModalVisible","onClose","closeAddModal","onAdd","addCustomer","_component_UpdateCustomerModal","isUpdateModalVisible","selectedCustomer","closeUpdateModal","onUpdateCustomer","updateCustomer"],"sources":["C:\\Users\\Rupert\\Desktop\\Capstone2024_Front-End\\src\\views\\adminviews\\CustomerManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"management-section\">\r\n    <h3>Manage Customers</h3>\r\n<!--    <button @click=\"openAddModal\">Add Customer</button>-->\r\n    <input type=\"text\" v-model=\"searchQuery\" placeholder=\"Search customers...\" />\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th @click=\"sortBy('id')\">ID</th>\r\n          <th @click=\"sortBy('firstName')\">First Name</th>\r\n          <th @click=\"sortBy('lastName')\">Last Name</th>\r\n          <th @click=\"sortBy('email')\">Email</th>\r\n          <th @click=\"sortBy('phone')\">Phone</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"customer in filteredCustomers\" :key=\"customer.id\">\r\n          <td>{{ customer.userId }}</td>\r\n          <td>{{ customer.firstName }}</td>\r\n          <td>{{ customer.lastName }}</td>\r\n          <td>{{ customer.contact.email }}</td>\r\n          <td>{{ customer.contact.phoneNumber }}</td>\r\n          <button @click=\"openUpdateModal(customer)\">Update</button>\r\n          <button @click=\"removeCustomer(customer.userId)\">Delete</button>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <!-- Modals -->\r\n    <AddCustomerModal\r\n      :isVisible=\"isAddModalVisible\"\r\n      @close=\"closeAddModal\"\r\n      @add=\"addCustomer\"\r\n    />\r\n    <UpdateCustomerModal\r\n      :isVisible=\"isUpdateModalVisible\"\r\n      :customer=\"selectedCustomer\"\r\n      @close=\"closeUpdateModal\"\r\n      @update-customer=\"updateCustomer\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AddCustomerModal from '@/modals/AddCustomerModal.vue';\r\nimport UpdateCustomerModal from '@/modals/UpdateCustomerModal.vue';\r\nimport { getCustomers, deleteCustomer, updateCustomer, createCustomer } from '@/services/customerService';\r\n\r\nexport default {\r\n  components: {\r\n    AddCustomerModal,\r\n    UpdateCustomerModal\r\n  },\r\n  data() {\r\n    return {\r\n      customers: [],\r\n      sortKey: '',\r\n      sortAsc: true,\r\n      isAddModalVisible: false,\r\n      isUpdateModalVisible: false,\r\n      selectedCustomer: null,\r\n      searchQuery: ''\r\n    };\r\n  },\r\n  async created() {\r\n    await this.fetchCustomers();\r\n  },\r\n  computed: {\r\n    filteredCustomers() {\r\n      return this.customers.filter(customer => {\r\n        const query = this.searchQuery.toLowerCase();\r\n        return (\r\n          customer.firstName.toLowerCase().includes(query) ||\r\n          customer.lastName.toLowerCase().includes(query) ||\r\n          (customer.contact && customer.contact.email.toLowerCase().includes(query)) ||\r\n          (customer.contact && customer.contact.phoneNumber.includes(query))\r\n        );\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchCustomers() {\r\n      try {\r\n        this.customers = await getCustomers();\r\n      } catch (error) {\r\n        console.error('Error fetching customers:', error);\r\n      }\r\n    },\r\n    openAddModal() {\r\n      this.isAddModalVisible = true;\r\n    },\r\n    closeAddModal() {\r\n      this.isAddModalVisible = false;\r\n    },\r\n    openUpdateModal(customer) {\r\n      this.selectedCustomer = customer;\r\n      this.isUpdateModalVisible = true;\r\n    },\r\n    closeUpdateModal() {\r\n      this.isUpdateModalVisible = false;\r\n    },\r\n    async addCustomer(newCustomer) {\r\n      try {\r\n        await createCustomer(newCustomer);\r\n        await this.fetchCustomers(); // Refresh the customer list after addition\r\n        this.closeAddModal();\r\n      } catch (error) {\r\n        console.error('Error adding customer:', error);\r\n      }\r\n    },\r\n    async updateCustomer(customerId, updatedCustomer) {\r\n      if (!customerId || customerId === 'undefined') {\r\n        console.error('Invalid Customer ID');\r\n        return;\r\n      }\r\n      try {\r\n        await updateCustomer(customerId, updatedCustomer);\r\n        this.fetchCustomers();\r\n      } catch (error) {\r\n        console.error('Error updating customer:', error);\r\n      }\r\n    },\r\n    async removeCustomer(customerId) {\r\n      if (confirm('Are you sure you want to delete this customer?')) {\r\n        try {\r\n          await deleteCustomer(customerId);\r\n          this.fetchCustomers();\r\n        } catch (error) {\r\n          console.error('Error deleting customer:', error);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.management-section {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\nth, td {\r\n  text-align: left;\r\n  padding: 10px;\r\n  border-bottom: 1px solid #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton {\r\n  padding: 5px 10px;\r\n  background-color: #3498db;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #2980b9;\r\n}\r\n\r\ninput[type=\"text\"] {\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAoB;mBADjC;mBAAA;;;;uBACEC,mBAAA,CAuCM,OAvCNC,UAuCM,G,0BAtCJC,mBAAA,CAAyB,YAArB,kBAAgB,sBACxBC,mBAAA,6DAA8D,E,gBAC1DD,mBAAA,CAA6E;IAAtEE,IAAI,EAAC,MAAM;IAJtB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAIgCC,KAAA,CAAAC,WAAW,GAAAF,MAAA;IAAEG,WAAW,EAAC;iDAAzBF,KAAA,CAAAC,WAAW,E,GACvCN,mBAAA,CAsBQ,gBArBNA,mBAAA,CASQ,gBARNA,mBAAA,CAOK,aANHA,mBAAA,CAAiC;IAA5BQ,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEK,IAAA,CAAAC,MAAM;KAAQ,IAAE,GAC5BV,mBAAA,CAAgD;IAA3CQ,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEK,IAAA,CAAAC,MAAM;KAAe,YAAU,GAC3CV,mBAAA,CAA8C;IAAzCQ,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEK,IAAA,CAAAC,MAAM;KAAc,WAAS,GACzCV,mBAAA,CAAuC;IAAlCQ,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEK,IAAA,CAAAC,MAAM;KAAW,OAAK,GAClCV,mBAAA,CAAuC;IAAlCQ,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEK,IAAA,CAAAC,MAAM;KAAW,OAAK,G,0BAClCV,mBAAA,CAAgB,YAAZ,SAAO,qB,KAGfA,mBAAA,CAUQ,iB,kBATNF,mBAAA,CAQKa,SAAA,QAzBbC,WAAA,CAiB+BC,QAAA,CAAAC,iBAAiB,EAA7BC,QAAQ;yBAAnBjB,mBAAA,CAQK;MARsCkB,GAAG,EAAED,QAAQ,CAACE;QACvDjB,mBAAA,CAA8B,YAAAkB,gBAAA,CAAvBH,QAAQ,CAACI,MAAM,kBACtBnB,mBAAA,CAAiC,YAAAkB,gBAAA,CAA1BH,QAAQ,CAACK,SAAS,kBACzBpB,mBAAA,CAAgC,YAAAkB,gBAAA,CAAzBH,QAAQ,CAACM,QAAQ,kBACxBrB,mBAAA,CAAqC,YAAAkB,gBAAA,CAA9BH,QAAQ,CAACO,OAAO,CAACC,KAAK,kBAC7BvB,mBAAA,CAA2C,YAAAkB,gBAAA,CAApCH,QAAQ,CAACO,OAAO,CAACE,WAAW,kBACnCxB,mBAAA,CAA0D;MAAjDQ,OAAK,EAAAJ,MAAA,IAAES,QAAA,CAAAY,eAAe,CAACV,QAAQ;OAAG,QAAM,iBAvB3DW,UAAA,GAwBU1B,mBAAA,CAAgE;MAAvDQ,OAAK,EAAAJ,MAAA,IAAES,QAAA,CAAAc,cAAc,CAACZ,QAAQ,CAACI,MAAM;OAAG,QAAM,iBAxBjES,UAAA,E;sCA4BI3B,mBAAA,YAAe,EACf4B,YAAA,CAIEC,2BAAA;IAHCC,SAAS,EAAE1B,KAAA,CAAA2B,iBAAiB;IAC5BC,OAAK,EAAEpB,QAAA,CAAAqB,aAAa;IACpBC,KAAG,EAAEtB,QAAA,CAAAuB;8DAERP,YAAA,CAKEQ,8BAAA;IAJCN,SAAS,EAAE1B,KAAA,CAAAiC,oBAAoB;IAC/BvB,QAAQ,EAAEV,KAAA,CAAAkC,gBAAgB;IAC1BN,OAAK,EAAEpB,QAAA,CAAA2B,gBAAgB;IACvBC,gBAAe,EAAE5B,QAAA,CAAA6B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}